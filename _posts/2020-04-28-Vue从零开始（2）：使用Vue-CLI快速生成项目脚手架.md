---
classes: wide
title: "Vue从零开始（2）：使用Vue CLI快速生成项目脚手架"
last_modified_at: 2020-04-28 22:12:40
categories:
  - Vue从零开始
tags:
  - Vue

---

### 前言

[上一篇](https://ricardolsw.github.io/vue%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/Vue%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B-1-%E5%89%8D%E7%AB%AF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/)讲到如何搭建前端环境，这一篇我们开始使用[Vue CLI](https://cli.vuejs.org/zh/)来快速生成一个Vue的项目脚手架。

目前Vue CLI有两个版本，新版本Vue CLI3对应@vue/cli，老版本Vue CLI2对应[vue-cli](https://github.com/vuejs/vue-cli/tree/v2#vue-cli--)。这里分别介绍这两个版本如何创建一个项目。

首先全局安装这两个的其中一个（看过我第一篇已经安装过的可以忽略掉）：

```shell
$ cnpm install -g @vue/cli
```

```shell
$ cnpm install -g vue-cli
```

**注意**：在同一个环境安装Vue CLI3和Vue CLI2的话，因为他们都是用相同的`vue`命令，Vue CLI2会被覆盖掉，这时候想要使用Vue CLI2的`vue init`来搭建项目的话，需要全局安装一个桥接工具：

```shell
$ cnpm install -g @vue/cli-init
```

### 使用Vue CLI3创建一个项目

1. 运行以下命令创建一个项目：

   ```shell
   $ vue create vue-demo
   ```

2. 选择`Manually select features`进行手动配置：

   ![](https://blog.ricardolsw.com/image/2jwtmDhX2Ub3ehPqhi1QVqNwkHpiecjc.jpg)

3. 依次勾选Babel (语法编译器)、Router (Vue路由)、Vuex (Vue全局状态管理)、CSS Pre-processors (CSS预处理)、Linter/Formatter (代码检查/格式化)

   ![](https://blog.ricardolsw.com/image/Whxu0hih1WP0FmMjrIS3GZ9fId1j1cpA.jpg)

4. 询问是否使用history模式的路由，它的区别是使用history模式的话url不会带有#，这里我们选择y

   ![](https://blog.ricardolsw.com/image/cn1G9unkVLOKLRoAkfgQTPdq8GbiRXJ0.jpg)

5. 选择一种CSS的类型，这里我们使用sass，选择第一个`Sass/SCSS (with dart-sass)`

   ![](https://blog.ricardolsw.com/image/xtghHpwxyRJ2blMOZTZ2U0ad02i1AXce.jpg)

6. 选择一种代码检查/格式化工具，在[这一篇文章](http://pluto.definesys.com/web/home/paperBee/articleDetail?articleId=ba063a599092d418)我有讲到使用ESLint+Prettier来格式化代码，这里我们选择`ESLint + Prettier`

   ![](https://blog.ricardolsw.com/image/GtKoRKrhOSY1Ct1CGsln5TehlSiqsezj.jpg)

7. 这一步选择`Lint on save`：

   ![](https://blog.ricardolsw.com/image/cRjIJWk9HgwTAu86oDYjM1kMAccI3lnm.jpg)

8. 询问Babel、ESLint等配置文件存放位置，可以选择生成单独的配置文件，也可以选择在在package.json里生成配置，这里我们选择第一个单独的配置文件

   ![](https://blog.ricardolsw.com/image/uhWPTKV0eC7wlpefK3Hu0A1x4OBMDQHh.jpg)

9. 询问是否保存这些配置，保存配置可以在下次创建项目的时候直接使用已保存的配置快速生成一个Vue项目，选择y，输入预设的名字保存该预设。

   ![](https://blog.ricardolsw.com/image/9ma3KicXpLjojBpyrTnbAbMvA1Wh1i7j.jpg)

   ![](https://blog.ricardolsw.com/image/h4TWSuAZ9WWxhs3jnlSMdc2ZJgqohshS.jpg)

10. 询问使用yarn还是npm包管理工具，这里我们选择npm

    ![](https://blog.ricardolsw.com/image/uiEkKuFCiAYpOu24xEAGIDoawRExCYg0.jpg)

11. 等待依赖安装完成：

    ![](https://blog.ricardolsw.com/image/ztymbS1UykFJsyM7xwthNu9eJA1wW1MJ.jpg)

    当出现以下内容表示安装完成：

    ![](https://blog.ricardolsw.com/image/QT7olQecJMThrTzBYxY2mqCMMyMFhDxB.jpg)

到这里，一个使用Vue CLI3创建的Vue项目就搭建好了，我们使用VSCode打开来看一下目录结构：

> 另外Vue CLI3也可以使用图形化界面来搭建项目，使用`vue ui`命令启动GUI页面，然后在浏览器地址栏输入`http://localhost:8000`就能打开了，搭建过程与上面讲解的一样，可以自己了解一下。
>
> 使用VSCode开发Vue项目需要安装Vetur插件

```
|-- vue-demo
    |-- .browserslistrc            // 浏览器兼容配置文件
    |-- .eslintrc.js               // ESLint配置文件
    |-- .gitignore
    |-- README.md
    |-- babel.config.js            // babel配置文件
    |-- node_modules               // 依赖包文件夹，存放着开发依赖和运行依赖
    |-- package-lock.json
    |-- package.json               // 项目描述文件
    |-- public                     
    |   |-- favicon.ico            // 网页图标
    |   |-- index.html             // 入口页面
    |-- src                        // 源码目录，所以开发的页面都在这里面
        |-- App.vue                // 根组件
        |-- main.js                // 程序入口文件
        |-- assets                 // 资源目录
        |   |-- logo.png           
        |-- components             // vue公共组件目录
        |   |-- HelloWorld.vue     // 这是一个HelloWorld组件
        |-- router                 // vue前端路由文件目录
        |   |-- index.js           
        |-- store                  // vue全局状态管理文件目录
        |   |-- index.js           
        |-- views                  // vue视图文件目录
            |-- About.vue          // About页面
            |-- Home.vue           // Home页面
```

### 使用Vue CLI2创建一个项目

1. 运行以下命令开始创建一个项目：

   ```shell
   $ vue init webpack vue2-demo
   ```

   ![](https://blog.ricardolsw.com/image/qU3VMGBiQqFTDxT03TlTDYKZelCYuZTz.jpg)

2. 配置项目名称，可以使用第一步的vue2-demo，我们直接回车跳过：

   ![](https://blog.ricardolsw.com/image/j0uWgaZT6cSEguXmnjDqYZHmr6eeAzUz.jpg)

3. 项目描述，默认就行，后期可在package.json里自行更改：

   ![](https://blog.ricardolsw.com/image/jZt8PpxytRJTs8XqFUZphChJuNSqOKhy.jpg)

4. 作者信息，同上：

   ![](https://blog.ricardolsw.com/image/ns0PaXbDahYjYxe4J9WTGqDhr8wZ8lJX.jpg)

5. 构建模式我们选择第一个，具体区别可参考[官方文档](https://cn.vuejs.org/v2/guide/installation.html#%E8%BF%90%E8%A1%8C%E6%97%B6-%E7%BC%96%E8%AF%91%E5%99%A8-vs-%E5%8F%AA%E5%8C%85%E5%90%AB%E8%BF%90%E8%A1%8C%E6%97%B6)：

   ![](https://blog.ricardolsw.com/image/zT4R1JcmmuGOc08zefRBBb4mk57NtB0p.jpg)

6. 选择y使用Vue路由：

   ![](https://blog.ricardolsw.com/image/2gYBf1q4pXThJBPZwbLh1YZxRFlsJ5aF.jpg)

7. ESLint我们也勾上：

   ![](https://blog.ricardolsw.com/image/WGs3Gb8LuTVqdvMgbF8aq5YIgj4rNsG5.jpg)

8. 选择ESLint预设，前两种是预设好的风格，后面有提供地址，可以去了解一下，第三个是自定义风格，这里我们默认第一个：

   ![](https://blog.ricardolsw.com/image/le6WnRbXQeBbfB4Z065qzXzvBe64zUVe.jpg)

9. 单元测试：n（后期需要，可以手动添加）

   ![](https://blog.ricardolsw.com/image/7ss4s5ISZhhRKyo6eRpHA9gcxbJ9vnlo.jpg)

10. e2e测试同上：

    ![](https://blog.ricardolsw.com/image/zxqGUyMF5waHrEOvRQ9xcscwB0O2OKyK.jpg)

11. 默认使用npm包管理工具：

    ![](https://blog.ricardolsw.com/image/dM96UxQkOrjxhCMkb1Pjj4lGS25jtuhK.jpg)

12. 等待依赖下载完成，以下是完整配置：

    ![](https://blog.ricardolsw.com/image/4U4WHbVjhi9ChWmItCleeLf6RaWhntbG.jpg)

13. 当出现`Project initialization finished!`的时候表示这个项目就初始化好了：

    ![](https://blog.ricardolsw.com/image/wfqhMX2VoAPhyQpM5gSX6OpWvoST1cE0.jpg)

同样，我们用VSCode打开来看一下目录结构：

```
|-- vue2-demo
    |-- .babelrc                   // 浏览器兼容配置文件
    |-- .editorconfig
    |-- .eslintignore              // ESLint忽略文件
    |-- .eslintrc.js               // ESLint配置文件
    |-- .gitignore
    |-- .postcssrc.js              // 配置给CSS样式添加浏览器前缀
    |-- README.md
    |-- index.html                 // 入口页面
    |-- node_modules               // 依赖包文件夹，存放着开发依赖和运行依赖
    |-- package-lock.json
    |-- package.json               // 项目描述文件
    |-- build                      // webpack相关配置文件目录
    |   |-- build.js               // 生产环境构建
    |   |-- check-versions.js      // 版本检查
    |   |-- logo.png
    |   |-- utils.js               // 构建相关工具
    |   |-- vue-loader.conf.js     // CSS加载器配置
    |   |-- webpack.base.conf.js   // webpack基础配置
    |   |-- webpack.dev.conf.js    // webpack开发环境配置
    |   |-- webpack.prod.conf.js   // webpack生产环境配置
    |-- config                     // vue配置文件目录
    |   |-- dev.env.js             // 项目开发环境配置
    |   |-- index.js               // 项目主要配置
    |   |-- prod.env.js            // 项目生产环境配置
    |-- src                        // 源码目录，所以开发的页面都在这里面
    |   |-- App.vue                // 根组件
    |   |-- main.js                // 程序入口文件
    |   |-- assets                 // 资源目录
    |   |   |-- logo.png
    |   |-- components             // vue公共组件目录
    |   |   |-- HelloWorld.vue
    |   |-- router                 // vue前端路由文件目录
    |       |-- index.js
    |-- static                     // 静态资源目录
        |-- .gitkeep
```

### 运行项目

当我们使用Vue CLI3或者2搭建好一个项目后，我们怎么让着个项目运行起来呢？在项目根目录中，有一个package.json文件，它是一个前端项目的描述文件，它包含着许多元信息，比如项目名称(name)、项目版本(version)、项目描述(description)、启动脚本(scipts)以及依赖包配置(其中dependencies是运行依赖，devDependencies是开发依赖)等等。

我们要运行项目的话，只需要关注scripts属性里面的内容即可：

- vue-demo的package.json里的scripts：

  ```json
  "scripts": {
    "serve": "vue-cli-service serve",
    "build": "vue-cli-service build",
    "lint": "vue-cli-service lint"
  }
  ```

  在项目根目录下使用命令运行项目：

  ```shell
  $ npm run serve
  ```

- Vue2-demo的package.json里的scripts：

  ```json
  "scripts": {
    "dev": "webpack-dev-server --inline --progress --config build/webpack.dev.conf.js",
    "start": "npm run dev",
    "lint": "eslint --ext .js,.vue src",
    "build": "node build/build.js"
  }
  ```

  在项目根目录下使用命令运行项目：

  ```shell
  $ npm run start
  ```

可以看出，使用Vue CLI3和2创建的项目启动脚本还是有所区别的，但它们都是基于webpack进行打包构建的。

项目启动成功后，在浏览器地址栏输入：http://localhost:8080 （根据运行后命令行提示的地址打开浏览器，一般默认是http://localhost:8080）就可以查看你的前端页面了。

### 运行他人的项目

一般我们从git上或者从别人那里拿到一个Vue项目，在运行之前，我们需要在根目录使用命令来安装该项目所需要的所有依赖包。

1. 使用以下一种命令安装项目依赖：

   ```shell
   $ npm i
   #或者
   $ cnpm i
   # i为install的缩写，也可以使用 npm install / cnpm install
   ```

2. 安装完成后，项目根目录会有一个node_modules文件夹，这个文件夹用于存放项目所需的开发依赖以及运行依赖。然后根据package.json里的scripts属性内容来运行项目，一般为`npm run start`或`npm run serve`。

### 写在最后

看到这里，我想大家对Vue项目的搭建到运行都有了一个简单的了解，可以拿到一个项目文件，就能自己动手让它跑起来。下一篇将介绍如何打包一个Vue项目以及多环境打包配置。

我慢慢的写，你们慢慢的看~





上一篇：[《Vue从零开始（1）：前端环境搭建》](http://pluto.definesys.com/web/home/paperBee/articleDetail?articleId=97d5049d60ff3088)

下一篇：[《Vue从零开始（3）：创建页面+添加路由+Mock模拟数据》](https://ricardolsw.github.io/vue%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/Vue%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B-3-%E5%88%9B%E5%BB%BA%E9%A1%B5%E9%9D%A2+%E6%B7%BB%E5%8A%A0%E8%B7%AF%E7%94%B1+Mock%E6%A8%A1%E6%8B%9F%E6%95%B0%E6%8D%AE/)

